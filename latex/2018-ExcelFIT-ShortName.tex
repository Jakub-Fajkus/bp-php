\documentclass{ExcelAtFIT}
\usepackage[T1]{fontenc}
%\documentclass[czech]{ExcelAtFIT} % when writing in CZECH
%\documentclass[slovak]{ExcelAtFIT} % when writing in SLOVAK


%--------------------------------------------------------
%--------------------------------------------------------
%	REVIEW vs. FINAL VERSION
%--------------------------------------------------------

%   LEAVE this line commented out for the REVIEW VERSIONS
%   UNCOMMENT this line to get the FINAL VERSION
%\ExcelFinalCopy


%--------------------------------------------------------
%--------------------------------------------------------
%	PDF CUSTOMIZATION
%--------------------------------------------------------

\hypersetup{
	pdftitle={Paper Title},
	pdfauthor={Jakub Fajkus},
	pdfkeywords={Keyword1, Keyword2, Keyword3}
}

%--------------------------------------------------------
%--------------------------------------------------------
%	ARTICLE INFORMATION
%--------------------------------------------------------

\ExcelYear{2018}

\PaperTitle{How to Write an Excellent Excel@FIT Paper}

\Authors{Adam Herout*}
\affiliation{*%
  \href{mailto:herout@fit.vutbr.cz}{herout@fit.vutbr.cz},
  \textit{Faculty of Information Technology, Brno University of Technology}}

\Keywords{Evolutionary computation --- Neural Networks --- Linear Genetic Programming --- Robotics}

\Supplementary{\href{http://youtu.be/S3msCdn3fNM}{Demonstration Video} --- \href{http://excel.fit.vutbr.cz/}{Downloadable Code}}


%--------------------------------------------------------
%--------------------------------------------------------
%	ABSTRACT and TEASER
%--------------------------------------------------------

\Abstract{
Tato prace se zabyva navrhem a pouzitim frameworku vyuzivajici Evolucni Algoritmy, ktery je pouzit pro hledani zpusobu rizeni pocitacoveho
modelu jednoducheho robota.
Tento robot v pocitacove simulaci vykonava pohyb po stirale tam, ze se pohybuje k danym referencnim bodum.
Pro řízení modelu robota je pouzit přístup, ktery je založeny na instrukcích, inspirovany Linearnim Genetickym Programovanim.
Program, ktery ridi robota, ma k dispozici informaci o tom, kterym smerem lezi dalsi referencni bod.
Diky informaci o smeru, kterym lezi dalsi referencni bod jsou nalezena reseni schopna pohybu i po trajektorii, na ktere nebyly uceny.
}

\Teaser{
	\TeaserImage{placeholder.pdf}
	\TeaserImage{placeholder.pdf}
	\TeaserImage{placeholder.pdf}
}



%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
\begin{document}

\startdocument


%--------------------------------------------------------
%--------------------------------------------------------
%	ARTICLE CONTENTS
%--------------------------------------------------------

%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
\section{Introduction}

V oblasti robotiky je velmi dulezita schopnost rychle a levne prototypovat mozna reseni.
K tomuto ucelu je velmi vhodne pouziti pocitacove modelovani a simulace.
V situaci, kdy mame navrzenou fyzickou stranku robota, nastava otazka, jak rychle prototypovat jeho rizeni.
Existuje mnoho moznosti realizace rizeni robota, lisici se v zavislosti na pozadavcich a povaze cinosti robota.
Rizeni robota muze byt zalozeno na instrukcich nejakeho imperativniho jazyka nebo na neuronovych sitich.
Dalsi z moznosti jsou ruzne planovaci algoritmy a systemy. \todo{citace, zdroje, terminologie}
Pro prototypovani je vyhodne mit nastroj, ktery je schopny hledat vyhodne zpusoby rizeni robota.
Evolutionary algorithms are good for this purpose, because they are applicable for a wide range of problems.

Hledame reseni pro problem, ktery je definovan takto.
Mame model jednoducheho robota, pro ktereho hledame model rizeni.
Cilem je nalezt program(posloupnost instrukci) ktery bude model robota ritit tak, ze bude vykonavat pohyb po dane trajektorii..
Hledani reseni probiha automatizovane s vyuzitim evolucnich algoritmu.
K vyhodnoceni uspesnosti reseni je pouzit fyzikalni simulator specializovany na simulaci robotu Mujoco\cite{Todorov2012}.

There is many works focused on evolutionary robotics.
The ones that were focusing robot control were using many techniques, including finite state machines\cite{Hodgins1996}, classical control theory\cite{Mita1984} and neural networks \cite{Reil2002}\cite{Lewis1996}.
There is also a number of works using Evolutionary Algorithms to evolve controllers, particularly artificial neural networks\cite{Randall1992}\cite{Farooq2013}.
There are also works that are using Genetic Programming\cite{Macedo2017}.
The most similar work to ours is the work of Wollf and Mattias\cite{Wolff2007}.
They are using Linear Genetic Programming to evolve a bipedal motion of a humanoid model.

Our work, as well as work of Wollf and Mattias, uses LGP with similar interpret structure.
But the program structure is a bit different.
Our approach splits the program into smaller subprograms, as opposed to one program.
Our instruction set is reduced to only one instruction and we use only natural numbers ranging from -5 to 5.
Both the works use some sort of a environmental awareness.
Our work implements that by introducing an event subprogram as well as an information about direction to the next reference point.
The subprogram is executed when an event occurs in the environment(coming closer to a reference point).
Wollf and Mattias used a set of sensors, that are measuring current joint angles of the model.

Evolved programs showed expected behaviour in the simulation.
A few best solutions were evaluated for a different trajectory and exhibited good results.
This shows that even a relatively small information about the environment and simple computational model can lead to some degree of universality of the program.

%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
\section{Teoreticky uvod}
\label{sec:theory}
Here we will discuss a brief introduction to Linear Genetic Programming, based on \cite{Brameier2010}.
LGP is a special variant of the Genetic Programming.

Genetic Programming (GP) solves a modelling problem.
That means we know a set of inputs to a system and the outputs it should produce.
But we do not have the system that will compute the inputs and tell us the output.

In GP we are evolving computer program $P$ that represents a function: $f : I^n \to O^m$, where $I^n$ denotes the input data of $n$ dimensions and $O^m$ denotes the output data in $m$ dimensions.
When solving a control problem, we are looking for a such function, that will lead to the desired behavior.

The genotype space $G$ in GP includes all programs that can be composed of elements of a programming language $L$.
Programming language $L$ is defined by a instruction set and a terminal set.
An interpreter translates the genotype representation into the phenotype.
The phenotype is then executed and it's fitness is measured.

The original GP uses trees that correspond to expressions from a functional programming language.
The nodes of the tree represent functions, while leaves represent input values or constants.

The Linear Genetic Programming is a variant where programs are composed of a list of instructions from an imperative language or a machine code.
Each program has available predefined set of registers that can hold constants as well as results of instructions.
Those registers are often divided into groups: input registers, output registers and calculation registers.
The instructions are composed of an operation and one or more operands.
The operands may be registers or constants.
As the program is being executed it modifies the values of the registers, reads the inputs and writes the outputs.

%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------

\section{Experiments setup}
\label{sec:ExperimentsSetup}
There is a prepared scene in the simulator containing a set of reference points placed on a spiral(Figure~\ref{fig:SpiralTop}).
The robot model is given a task to move from point to point at given order and to get as close as possible to each of them.
This way the robot moves on a predefined trajectory.

%todo: image placement
\begin{figure}[t]
\centering
{\includegraphics[height=19em]{spiral_top_v2.png}}
\caption{Top view at the scene in the simulator.
We can see a spiral on which are placed the reference points(yellow spheres).
The small brown thing is the robot model.}
\label{fig:SpiralTop}
\end{figure}


\subsection{Robot control}
The robot is controlled by a program that is composed of instructions.
The simulator contains an interpret which executes the instructions and controls the robot actuated joints.

The interpret works only with natural numbers ranging from -5 to 5.
It contains predefined set of registers.
There are 11 immutable constant registers containing all possible constants(-5 to 5).
Next, there are two immutable input registers containing information about the direction to the next reference point.
One of them contains the inverse value of the other.

%todo: image placement
\begin{figure}[t]
	\centering
	{\includegraphics[height=19em]{reference_direction_v2.png}}
	\caption{
		The angle between the robot's heading vector(red arrow) and the vector to the next reference point(green arrow) is mapped to interpret inputs(-5 to 5).
		The reference point showed there(blue circle) would result in input value of 2.
	}
	\label{fig:ReferenceDirection}
\end{figure}

There are write only registers, each of them is directly mapped to one of the robot's joints.
The value in the output register is then converted into a force applied at the joint.

There is only one type of instruction.
This instruction copies a value from the input or constant register into the output register.
The instruction is composed of two values.
The first is the identification of the input or constant register.
The other is the identification of the output register.

The program itself is split into 3 smaller subprograms - init, event and main.
The init subprogram is executed at the start of the simulation and its purpose is to set the initial "pose" of the robot.
All instructions of the init program are executed in a single time.
After that there is a small, one second waiting time to give the robot time to establish the "pose".

The event subprogram is run each time the robot gets close enough to some of the reference points(but only once for each point).
It's purpose is to change the robot's "pose" as a preparation to move to the next reference point.
The event subprogram is executed in a single time and the waiting time is used as in the init subprogram.

The main subprogram is being run in an endless loop during the simulation.
Only one instruction is executed at a time.
Period of 0.3 seconds is used.


%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
\section{Experiements}
\label{sec:Experiments}
Here we will describe the instance of Evolutionary Algorithm used.
\todo{mluvit o populaci? nebo generaci kvuli ss?}


 - 1000 indiv
 - genotype size
 - force 1 mutation
 - zminit se o porovnani variaci?
 - steady state of 500
 - subprogram uniform crossover
 - 300 generations
 - tournament 2

%todo: image placement
\begin{figure}[t]
	\centering
	{\includegraphics[height=10em]{crossover.png}}
	\caption{
	A custom genetic crossover is used.
	It is based on uniform crossover, but it operates on the subprograms level.
	The genome of parents is divided into the subprograms and then there is a 1:1 chance to to inherit the subprogram from parent A or B.
	Here, the crossover of parents A and B resulted into offsprings C and D.
	In this case, only the init subprograms were swapped.
	}
	\label{fig:Crossover}
\end{figure}


\subsection{Experiment overview}
\todo{Zde bude popis experimentu - mravenec na primce? a na spirale}
\todo{Vsechny informace k experiemntu: tj. konfigurace GA, delka programu, rozdeleni na podprogramy(kolik kam), delka simulace}



%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------

\section{Results}
\todo{Zde budou prehledne vysledky experimentu - grafy, cisla, tabulky, obrazky, vsechno}


%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------

\section{Conclusions}
\label{sec:Conclusions}

\textbf{[Paper Summary]} What was the paper about, then? What the reader needs to remember about it?
Tato prace ukazala pouziti evolucnich algoritmu pro hledani programu pro rizeni robota. \todo{neco dalsiho}

\textbf{[Highlights of Results]} Exact numbers. Remind the reader that the paper matters.
\phony{Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tempus fermentum ipsum at venenatis. Curabitur ultricies, mauris eu ullamcorper mattis, ligula purus dapibus mi, vel dapibus odio nulla et ex. Sed viverra cursus mattis. Suspendisse ornare semper condimentum. Interdum et malesuada fames ac ante ipsum.}

\textbf{[Paper Contributions]} What is the original contribution of this work? Two or three thoughts that one should definitely take home.
\phony{Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent posuere mattis ante at imperdiet. Cras id tincidunt purus. Aliquam erat volutpat. Morbi non gravida nisi, non iaculis tortor. Quisque at fringilla neque.}

\textbf{[Future Work]} How can other researchers / developers make use of the results of this work?  Do you have further plans with this work? Or anybody else?
\phony{Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sollicitudin posuere massa, non convallis purus ultricies sit amet. Duis at nisl tincidunt, maximus risus a, aliquet massa. Vestibulum libero odio, condimentum ut ex non, eleifend.}

\section*{Acknowledgements}
I would like to thank my supervisor X. Y. for his help.

%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
%	REFERENCE LIST
%--------------------------------------------------------
%--------------------------------------------------------
\phantomsection
\bibliographystyle{unsrt}
\bibliography{2018-ExcelFIT-ShortName-bib}

%--------------------------------------------------------
%--------------------------------------------------------
%--------------------------------------------------------
\end{document}
